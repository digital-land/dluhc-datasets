{% extends 'layouts/base.html' %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters">
    <h1 class="govuk-heading-l">Edit record</h1>
  </div>
</div>
<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters">
    <form method="POST" action="{{ url_for('main.edit_record', id=dataset.dataset, record_id=record.id) }}">
      <div class="govuk-form-group">
        {% for field in form_fields %}
          {% if field.field == 'reference' %}
          {{
            appField(
              field,
              True if form.errors[field.field] else False,
              record.data.get(field.field, ''),
              True,
              "This field is not editable"
            )
          }}
          {% else %}
          {{
            appField(
              field,
              True if form.errors[field.field] else False,
              record.data.get(field.field, '')
            )
          }}
          {% endif %}
        {% endfor %}
        {{ form.csrf_token }}
      </div>
      {{
        buttonMenu({
          "classes": "govuk-!-margin-bottom-0",
          "items": [
            {
              "text": "Save record",
              "type": "submit"
            },
            {
              "element": "a",
              "text": "End record",
              "href": "./edit/end-record",
              "classes": "govuk-button--warning"
            }
          ]
        })
      }}
    </form>
  </div>
{% endblock content %}
