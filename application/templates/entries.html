{% extends 'layouts/base.html' %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters">
    <span class="govuk-caption-l">{{ dataset.name }}</span>
    <h1 class="govuk-heading-l">{{ dataset.entries | length }} records</h1>
  </div>
  <div class="govuk-grid-column-one-quarter govuk-!-text-align-right">
    {{
      buttonMenu({
        "text": "blah",
        "items": [
          {
            "element": "a",
            "text": "Add record"
          },
        ]
      })
    }}
  </div>
</div>
<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <hr class="govuk-section-break govuk-section-break--visible">
    {% if dataset.entries | length > 0 %}
    <section class="app-dataset-records">
      <table class="govuk-table">
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            {% for field in dataset.fields %}
            <th scope="col" class="govuk-table__header">{{field.field}}</th>
            {% endfor %}
            {# start -- if logged in ---------------------- #}
            <th scope="col" class="govuk-table__header">
              <span class="govuk-visually-hidden">Action</span>
            </th>
            {# end ---- if logged in ---------------------- #}
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          {% for entry in dataset.entries %}
          <tr class="govuk-table__row">
            {% for field in dataset.fields %}
              <td class="govuk-table__cell">{{entry.data[field.field]}}</td>
            {% endfor %}
            {# start -- if logged in ---------------------- #}
            <td class="govuk-table__cell">
              {{
                buttonMenu({
                  "items": [
                    {
                      "element": "a",
                      "text": "Edit",
                      "classes": "govuk-button--secondary"
                    }
                  ]
                })
              }}
            </td>
            {# end ---- if logged in ---------------------- #}
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </section>
    {% else %}
      {{
        govukInsetText({
          'text': 'There are no records for the ' + dataset.name + ' dataset'
        })
      }}
    {% endif %}
  </div>
</div>
{% endblock content %}
