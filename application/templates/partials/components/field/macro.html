{%- from 'govuk_frontend_jinja/components/input/macro.html' import govukInput -%}
{%- from 'govuk_frontend_jinja/components/textarea/macro.html' import govukTextarea -%}

{% macro appField(field, hasError, value) %}
  {% if hasError == True %}
    {% set _errorMessage = { "text" : "Error" } %}
  {% else %}
    {% set _errorMessage = False %}
  {% endif %}
  {% if field.datatype %}
    {% if field.datatype == 'text' %}
      {{
        govukTextarea({
          "label": {
            "text": field.name,
          },
          "id": field.field,
          "name": field.field,
          "errorMessage": _errorMessage,
          "value": value if value else ''
        })
      }}
    {% else %}
      {{
        govukInput({
          "label": {
            "text": field.name,
            "classes": "govuk-label",
          },
          "id": field.field,
          "name": field.field,
          "errorMessage": _errorMessage,
          "value": value if value else ''
        })
      }}
    {% endif %}
  {% else %}
    {% raw %}You didn't tell me the fieldtype{% endraw %}
  {% endif %}
{% endmacro %}
